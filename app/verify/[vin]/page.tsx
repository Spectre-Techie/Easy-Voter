"use client"\n\nimport { useEffect, useState } from "react"\nimport { useParams } from "next/navigation"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"\nimport { Alert, AlertDescription } from "@/components/ui/alert"\nimport { CheckCircle2, XCircle, Loader2, QrCode, ArrowLeft } from "lucide-react"\nimport Link from "next/link"\nimport { Button } from "@/components/ui/button"\n\ninterface VerificationResult { \n    valid: boolean\n    voter ?: { \n        name: string\n        vin: string\n        cardId?: string\n        state: string\n        lga: string\n        status: string\n        verifiedAt: string\n }\n    message ?: string\n } \n\nexport default function VerifyVinPage() { \n    const params = useParams() \n    const vin = params.vin as string\n    const [loading, setLoading] = useState(true) \n    const [result, setResult] = useState<VerificationResult | null>(null) \n\n    useEffect(() => { \n        if (!vin) return \n\n        const verifyVin = async () => { \n            try { \n                const response = await fetch(`/api/verify/${vin}`) \n                const data = await response.json() \n                setResult(data) \n } catch (error) { \n                setResult({ \n                    valid: false, \n                    message: \"Failed to verify voter card. Please try again.\",\n                })\n            } finally {\n                setLoading(false)\n            }\n        }\n\n        verifyVin()\n    }, [vin])\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\">\n            {/* Header */}\n            <header className=\"border-b bg-white/80 backdrop-blur-md shadow-sm\">\n                <div className=\"container mx-auto px-4 h-16 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-9 h-9 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg\">\n                            <span className=\"text-white font-bold text-lg\">EV</span>\n                        </div>\n                        <span className=\"font-bold text-xl bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">\n                            EasyVoter\n                        </span>\n                    </div>\n                    <Link href=\"/verify\">\n                        <Button variant=\"ghost\" size=\"sm\">\n                            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                            Back\n                        </Button>\n                    </Link>\n                </div>\n            </header>\n\n            <div className=\"container mx-auto px-4 py-12\">\n                <div className=\"max-w-2xl mx-auto space-y-8\">\n                    {/* Title */}\n                    <div className=\"text-center space-y-2\">\n                        <div className=\"flex justify-center mb-4\">\n                            <div className=\"rounded-full bg-blue-100 p-4\">\n                                <QrCode className=\"h-8 w-8 text-blue-600\" />\n                            </div>\n                        </div>\n                        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent\">\n                            Voter Card Verification\n                        </h1>\n                        <p className=\"text-muted-foreground text-lg\">\n                            Verifying VIN: <span className=\"font-mono font-semibold\">{vin}</span>\n                        </p>\n                    </div>\n\n                    {/* Loading State */}\n                    {loading && (\n                        <Card>\n                            <CardContent className=\"pt-6\">\n                                <div className=\"flex flex-col items-center justify-center py-8 space-y-4\">\n                                    <Loader2 className=\"h-12 w-12 animate-spin text-blue-600\" />\n                                    <p className=\"text-muted-foreground\">Verifying voter card...</p>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    )}\n\n                    {/* Results */}\n                    {!loading && result && (\n                        <Card className={result.valid ? \"border-green-200 bg-green-50\" : \"border-red-200 bg-red-50\"}>\n                            <CardContent className=\"pt-6\">\n                                {result.valid && result.voter ? (\n                                    <div className=\"space-y-6\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"rounded-full bg-green-100 p-3\">\n                                                <CheckCircle2 className=\"h-8 w-8 text-green-600\" />\n                                            </div>\n                                            <div>\n                                                <h3 className=\"font-semibold text-green-900 text-xl\">\n                                                    Valid Voter Card âœ“\n                                                </h3>\n                                                <p className=\"text-sm text-green-700\">\n                                                    This voter card is authentic and active\n                                                </p>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t border-green-200\">\n                                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">Full Name</p>\n                                                <p className=\"font-medium text-green-900 text-lg\">{result.voter.name}</p>\n                                            </div>\n                                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">VIN</p>\n                                                <p className=\"font-mono text-sm font-medium text-green-900\">\n                                                    {result.voter.vin}\n                                                </p>\n                                            </div>\n                                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">State</p>\n                                                <p className=\"font-medium text-green-900\">{result.voter.state}</p>\n                                            </div>\n                                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">LGA</p>\n                                                <p className=\"font-medium text-green-900\">{result.voter.lga}</p>\n                                            </div>\n                                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">Status</p>\n                                                <p className=\"font-medium text-green-900\">{result.voter.status}</p>\n                                            </div>\n                                            {result.voter.cardId && (\n                                                <div className=\"bg-white/50 p-4 rounded-lg\">\n                                                    <p className=\"text-sm text-green-700 mb-1\">Card ID</p>\n                                                    <p className=\"font-medium text-green-900\">{result.voter.cardId}</p>\n                                                </div>\n                                            )}\n                                            <div className=\"col-span-full bg-white/50 p-4 rounded-lg\">\n                                                <p className=\"text-sm text-green-700 mb-1\">Verified At</p>\n                                                <p className=\"text-sm text-green-700\">\n                                                    {new Date(result.voter.verifiedAt).toLocaleString()}\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ) : (\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"rounded-full bg-red-100 p-3\">\n                                                <XCircle className=\"h-8 w-8 text-red-600\" />\n                                            </div>\n                                            <div>\n                                                <h3 className=\"font-semibold text-red-900 text-xl\">Invalid Voter Card</h3>\n                                                <p className=\"text-sm text-red-700\">\n                                                    {result.message || \"This voter card could not be verified\"}\n                                                </p>\n                                            </div>\n                                        </div>\n                                        \n                                        <Alert className=\"border-amber-200 bg-amber-50\">\n                                            <AlertDescription className=\"text-amber-800\">\n                                                <strong>Possible reasons:</strong>\n                                                <ul className=\"list-disc list-inside mt-2 space-y-1\">\n                                                    <li>The VIN is incorrect or invalid</li>\n                                                    <li>The voter card has not been approved yet</li>\n                                                    <li>The voter card has been revoked</li>\n                                                </ul>\n                                            </AlertDescription>\n                                        </Alert>\n                                    </div>\n                                )}\n                            </CardContent>\n                        </Card>\n                    )}\n\n                    {/* Information */}\n                    <Alert>\n                        <AlertDescription>\n                            <strong>Note:</strong> This verification system checks the authenticity of digital voter\n                            cards issued by EasyVoter. For official INEC verification, please visit the INEC website.\n                        </AlertDescription>\n                    </Alert>\n\n                    {/* Actions */}\n                    <div className=\"flex justify-center\">\n                        <Link href=\"/verify\">\n                            <Button variant=\"outline\" size=\"lg\">\n                                Verify Another Card\n                            </Button>\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n
